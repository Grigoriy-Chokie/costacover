{% liquid
  assign title = section.settings.title
  assign button_1_text = section.settings.button_1_text
  assign button_1_url = section.settings.button_1_url
  assign button_2_text = section.settings.button_2_text
  assign button_2_url = section.settings.button_2_url
  
  assign padding_top = section.settings.padding_top | append: 'px'
  assign padding_bottom = section.settings.padding_bottom | append: 'px'
  assign padding_top_mobile = section.settings.padding_top_mobile | append: 'px'
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile | append: 'px'
-%}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --logo-grid-image-size: {{ section.settings.logo_size }}px;
  }

  .logo-grid--{{ section.id }} {
    padding-top: {{padding_top}};
    padding-bottom: {{padding_bottom}};
  }

  @media(max-width: 768px) {
    .logo-grid--{{ section.id }} {
      padding-top: {{padding_top_mobile}};
      padding-bottom: {{padding_bottom_mobile}};
    }
  }
{%- endstyle -%}
<style>
    #shopify-section-{{ section.id }} {
    {%- render 'section-variables', section: section -%}
    }
</style>

{% capture style_variables %}
  --columns: {{ section.settings.columns }};
  --columns-mobile: {{ section.settings.columns_mobile }};
{% endcapture %}

{{ 'section-logo-grid.css' | asset_url | stylesheet_tag }}
<div style="{{ style_variables }}" class="logo-grid logo-grid--{{ section.id }}">
  <div class="logo-grid__wrapper page-width page-width--narrow">
    <h2 class="heading title-wrapper font-bold title-md text-center">{{ title }}</h2>
    <div class="logo-grid__items {% if section.settings.center_last_grid_item %}logo-grid--center-last{% endif %}">
      {% for block in section.blocks %}
        {% assign logo = block.settings.logo %}

        {% if logo != blank or block.settings.logo_text != blank %}
          <div class="logo-grid__item">
            {%- unless logo == blank -%}
              {{ logo | image_url: width: 200 | image_tag }}
            {%- endunless -%}

            {%- unless block.settings.logo_text == blank -%}
              <div class="item__text">{{ block.settings.logo_text }}</div>
            {%- endunless -%}
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <div class="logo-grid__buttons">
      {% if button_1_text != blank and button_1_url != blank %}
        <a href="{{ button_1_url }}" class="button btn  button--primary button--fixed button--md icon-with-text">
          <span class="btn-text">
                {{ button_1_text }}
            {%- render 'icon', icon: 'arrow-right', size: 'sm', class: 'transform' -%}
              </span>
        </a>
      {% endif %}
      {% if button_2_text != blank and button_2_url != blank %}
        <a href="{{ button_2_url }}" class="button btn  button--primary button--fixed button--md icon-with-text">
          <span class="btn-text">
                {{ button_2_text }}
            {%- render 'icon', icon: 'arrow-right', size: 'sm', class: 'transform' -%}
              </span>
        </a>
      {% endif %}
    </div>
  </div>
</div>


{% schema %}
{
  "name": "Logo grid",
  "tag": "section",
  "blocks": [
    {
      "type": "block",
      "name": "Logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo Image"
        },
        {
          "type": "richtext",
          "id": "logo_text",
          "label": "Text"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Title",
      "default": "Lorem title"
    },
    {
      "type": "header",
      "content": "Buttons"
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Button text",
      "default": "Lorem title"
    },
    {
      "type": "url",
      "id": "button_1_url",
      "label": "Button link",
      "default": "/"
    },
    {
      "type": "text",
      "id": "button_2_text",
      "label": "Button text",
      "default": "Lorem title"
    },
    {
      "type": "url",
      "id": "button_2_url",
      "label": "Button link",
      "default": "/"
    },
    {
      "type": "range",
      "id": "columns",
      "min": 3,
      "max": 7,
      "step": 1,
      "unit": "col",
      "label": "Columns",
      "default": 6
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "unit": "col",
      "label": "Columns(mobile)",
      "default": 2
    },
    {
      "type": "paragraph",
      "content": "Space between template sections(Desktop)"
    },
    {
      "type": "color",
      "id": "color_button_background",
      "label": "t:sections.global.settings.color_button_background.label",
      "default": "#8B6C41"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom",
      "default": 0
    },
    {
      "type": "paragraph",
      "content": "Space between template sections(Mobile)"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding top mobile",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom mobile",
      "default": 0
    },
    {
      "type": "header",
      "content": "Logo item"
    },
    {
      "type": "range",
      "id": "logo_size",
      "label": "Size logo",
      "min": 40,
      "max": 120,
      "step": 10,
      "unit": "px",
      "default": 60
    },
    {
      "type": "checkbox",
      "id": "center_last_grid_item",
      "label": "Center last item in grid",
      "info": "If checked, the last item in the grid will be horizontally centered when the total number of items is odd."
    }
  ],
  "presets": [
    {
      "name": "Logo grid"
    }
  ]
}
{% endschema %}